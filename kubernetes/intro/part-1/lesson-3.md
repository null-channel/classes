# What is immutable infrastructure and declarative resources

TODO: I really hate this, needs done more better

All of us has heard of "it worked on my machine" but then failed in production because of an un-accounted for environment variable, configuration or installed dependency. This problem is "solved" by immutable infrastructure. What is immutable infrastructure you ask? Containers, containers build an immutable, isolated image that gives us this "repeatable build", but is further enabled enabled by kubernetes as a whole. When you dive into "immutable" infrastructures and containers it becomes apparent that you still need a way to provide configuration to said infrastructure and while containers don't have a direct way of doing this kubernetes setps in here.

While containers provide the base layer it became important to ensure this immutable infrastructure could be run and scheduled at will, empowering you to worry less about if your application can be deployed on a machine. Now this solves a lot of issues around rapidly standing up new instances of your application as you no longer need to worry if your infrastructure was configured properly and that the right dependencies where installed because the container ensures all the requirements for your app are packaged into it's image.

Now this is great. kubernetes and containers not only provide you the peace of mind that your application or service going to be able to run but it will be able to rescedule it in case of a fault because your container can run on any of the machines in the kubernetes cluster due to the inherit nature of containers. This also makes things like scaling simpler because you don't need to worry about provisioning a machine if you need to run another replica of your applications as it can run on any machine!

Now that we have things running in container what if a container fails? this is where declarative resources comes to play. Declarative lets you declare the state you want something in and it works to ensure that what is actually out there matches what you want. Because we have immutable infrastructure it's now easy for kubernetes to take this declarative state and work via controllers to ensure that the state matches the requested. This way, when you declare how you want something to run, if that changes kubernetes is able to adapt and update to strive towards the declared state.

This brings up and issue you need to understand when you go into using kubernetes, you must ensure that you make everything you deploy be described declaratively, now while I think this is the way to go you have to be understanding of this and ensure all the teams are on board. Something I will stress over and over again. Very few teams can truly hide kubernetes from their developers, and those that do have very large teams working to hid it from them. This means it's best if the whole team is on board as they are all going to have to be used to doing things in a certain way. And this includes making applications that can be managed and described declaratively.

So in short, Declarative infrastructure and declarative applications are ones where you declare how you want something to be, and some type of engine works to not only get it there, but then also ensure it stays there and fixes issues. Declarative tools take state, not actions or steps. This is different then a lot of the imperative tools you might be used too that describe steps to take to get a resource in the desired state.

Ok. so now that we have a lot of bland information out of the way, who wants to create a cluster and do things with it?
